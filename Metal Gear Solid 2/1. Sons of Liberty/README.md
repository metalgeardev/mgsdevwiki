# 2001 - Sons of Liberty (PS2)
Initial Release Date: 12NOV2001 / [Redump](http://redump.org/disc/427/)
## Decomp Project
https://github.com/GirianSeed/mgs2

## Table of Contents
```table-of-contents
```
## ISO Extraction
PS2 disks are not encrypted and can be extracted with Windows Explorer / 7zip.

## .DAT Extraction

| File Name | Extraction Tool                                                                                                                            | Usage                                         |
| --------- | ------------------------------------------------------------------------------------------------------------------------------------------ | --------------------------------------------- |
| CODEC.DAT |                                                                                                                                            |                                               |
| DEMO.DAT  | [PSSound](https://www.romhacking.net/utilities/679/) <br>Can extract audio as .wav, but cannot extract in the original audio format (.MDX) |                                               |
| FACE.DAT  | [Arsenal](https://github.com/Jayveer/Arsenal/releases)                                                                                     | Invoke via CMD<br>`Arsenal.exe STAGE.DAT`<br> |
| MOVIE.DAT |                                                                                                                                            |                                               |
| STAGE.DAT | [Arsenal](https://github.com/Jayveer/Arsenal/releases)<br>Does not extract all files, such as streaming audio (.MDX)                       | Invoke via CMD<br>`Arsenal.exe FACE.DAT`      |
| VOX.DAT   | [PSSound](https://www.romhacking.net/utilities/679/) <br>Can extract audio as .wav, but cannot extract in the original audio format (.MDX) |                                               |
A newer updated ![dictionary.txt](resources/dictionary.txt) for use with Arsenal.

### Stages
[List of all Stages](Stage%20List.md)

## File Formats

| Format | Function                       | Notes                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| ------ | ------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ANM    | Object Animation               | Animations for non-character objects (ie Kastka fastropes, Snake's bungee cord, Ocelot's coat when thrown, cut Federal hall flag.) Several are paired with .CV2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| BIN    | Executable Overlays            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| CV2    | Animations?                    | Appears to be various animation states. Several appear paired with .ANM                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| EVM    | Environment Model              | Originally made with [SoftImage\|3D](https://en.wikipedia.org/wiki/Softimage_3D)<br><br>Open with Jayveer's [Metal Gear Solid 2 Noesis Plugin](https://github.com/Jayveer/MGS-KMS-EVM-Noesis)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| GCX    | Scripts / Game Coding Language |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| HZX    | HAZARD Data                    | Renamed to .GEOM in later games. Contains guard routes, radar data, (assumably stage collision, camera placement)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| KMS    | Konami Model                   | Originally made with [SoftImage\|3D](https://en.wikipedia.org/wiki/Softimage_3D)<br><br>Open with Jayveer's [Metal Gear Solid 2 Noesis Plugin](https://github.com/Jayveer/MGS-KMS-EVM-Noesis)<br><br>No tooling currently supports repacking models.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| LT2    | Stage Lighting                 | Likely created with the [in-house lighting editor](../../Metal%20Gear%20Solid%204/Lighting%20Editor%20II/README.md) seen during the development of MGS4.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| MAR    | Animation Data                 | Opens with Jayveer's [Metal Gear Solid 2 Noesis Plugin](https://github.com/Jayveer/MGS-KMS-EVM-Noesis)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| MDX    | Streaming Audio                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| O2D    | (Overlay 2D)<br>UI Layouts     | Internally referred to as Layout 2D. Is loaded in via the Layout Manager (LOM) / Layoutman.<br>Various debug print is in the release build referencing: <br>`LOM` `Actlist`, `Icolist`, `Objlist`, `Padlist`, `Mode`, `Create Sprite`, `Set Texture`, `Load TRI`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| PSQ    | Audio Container                | VAG (PS2 Audio Format)<br>MDX (Midi Sequences)<br>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| ROW    | Mixed                          | When the game compiled on the PS2, all the file extensions were crunched down to just one character. As such, multiple different formats exist underneath the .ROW extension.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| SAR    | Animation Sound Sequences      | Equivalent to .mtsq in later games. Controls which audio sequence plays during an animation. (Only sequences in the level's sound bank/MDX can be loaded in.) Pairs with .var                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| TRI    | (Tim2)<br>Textures             | [TM2](https://openkh.dev/common/tm2.html) (PlayStation 2 texture format)<br>([Additional file specifications](https://github.com/GirianSeed/tim2/blob/trunk/webtech/tim2v4b_e/tim2.txt))<br><br>Can be viewed by opening the model that they're applied to with Jayveer's [Metal Gear Solid 2 Noesis Plugin](https://github.com/Jayveer/MGS-KMS-EVM-Noesis)<br>**NOTE:** TRI textures that are partially transparent (nearly 40% of the game's textures) are NOT exported correctly by Jayveer's Noesis plugin.<br><br>- TRI textures CAN be dumped with correct transparencies with [PCSX2](https://pcsx2.net/)<br><br>- Refer to [PS2 Texture Color Space](../../Common/Texturing/PS2%20Texture%20Color%20Space/README.md) for why PS2 textures are 50% transparent.<br><br>- A Work-In-Progress repo with all the original textures properly dumped and fully restructured for use with the HDC/Master Collection can be located here: https://github.com/dotlessone/MGS2-PS2-Textures |
| VAG    | PS2 Audio                      | PlayStation Audio Format<br>[vgmstream - DPCM 8-bit (KCE Japan)](https://github.com/vgmstream/vgmstream/blob/master/src/coding/dpcm_kcej_decoder.c)<br>[vgmstream - VAG](https://github.com/vgmstream/vgmstream/blob/e0e5b707486ef8ac8b8f15cd1134b135372cc157/src/meta/vag.c#L65-L83)<br>https://github.com/eurotools/es-ps2-vag-tool/releases/tag/3.0.0.0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| VAR    | Animation Data                 | Pairs with .sar                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| ZMS    | Container                      | Contains .KMS & .CV2. Only used by cbx.zms, cbx_futa1.zms, cbx_futa2.zms, cbx_futa3.zms, cbx_futa4.zms                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
### .ROW Formats
| Format | Function          | Notes                                                                                                                                                                                                                                                                                                 |
| ------ | ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| RAT    | Animated Texture  | ema_ooze_blood, fat_ooze_blood (also used in MGS3 for sok_coat_body_incontinence)                                                                                                                                                                                                                     |
| RAW    | Binary Data       | keepfont.row - Font<br><br>celgei_snapshot_bigsize - Prerendered image of the photograph Snake takes of Sergei. (In the Master Collection this is a JPEG with a "BP_MEMJPEG" header.)<br><br>vram0.row / tdcm_empty.raw<br><br>tnkicon.row / plticon.row - Memory card save icons?                    |
| RIX    | IPU / PS2 Movie   | https://docs.fileformat.com/game/ips-ps2/<br>Movie that gets mapped to the walls in the stage where you fight Vamp (Shell 2 Core, B1 Filtration Chamber NO2 / w31c) to create the light reflection effect. (reflact02.row)<br><br>sco_face_speech = speech keyframes for tv's on the wall in holds(?) |
| ROW    | ?                 |                                                                                                                                                                                                                                                                                                       |
| RPD    | Recorded Pad Demo | Recorded controller inputs for earlier cutscenes & tutorials (ie Snake/Raiden aiming the M9 in first person, going through his inventory during a codec call, ect.)                                                                                                                                   |
| RPT    | Mixed             | Physics 3D Model file \| (w41a.sdw.row)<br><br>RPT Version 2.00 ( 2000/07/13 ) \| (c4_kaitai_b1_frost_cm)<br>- Second usage seems to be bounding box size data for C4's.                                                                                                                              |
| RTX    | Plaintext Script  | SPRITE Bootup cutscene script (/face/photo/cache.dar/photo_term.rtx)<br>Contains all text + markdown for font size, waits - \W10\ , ect.                                                                                                                                                              |
| RVW    |                   | (rev_parts_coat.row)                                                                                                                                                                                                                                                                                  |


-----------------

RAW INFO DUMP BELOW. NEEDS SORTING.


'00' => 'anm',    # a
'01' => 'bin',    # b
'02' => 'cv2',    # c // 0x5DB61100 / cvy in PC Substance
'03' => 'dar',    # d
'04' => 'evm',    # e / evx in PC Substance
'05' => 'far',    # f // 0xD3E4B100
'06' => 'gcx',    # g
'07' => 'hzx',    # h // 04: SOL / 05: SUB
'08' => '08',    # i
'09' => '09',    # j
'0a' => 'kms',    # k Konami Model / kmy>kmx
'0b' => 'lt2',    # l
'0c' => 'mar',    # m // MARa
'0d' => '0d',    # n
'0e' => 'o2d',    # o Overlay 2D / LayoutMan
'0f' => '0f',    # p
'10' => '10',    # q
'11' => 'row',    # r row, rmt, rpt, raw
'12' => 'sar',    # s
'13' => 'tri',    # t Tim2 Pack
'14' => '14',    # u
'15' => 'var',    # v
'16' => '16',    # w
'17' => 'xti',    # x
'18' => '18',    # y
'19' => 'zms'    # z

mdl		// Physics 3D Model file 8020.0002
rix		// PS2 != Xbox/PC
rmt		// motion-related format
rol		// found in VR stages
rwv		// PS2 != Xbox/PC

00180720.gcx scenerio.gcx
0032cad3.gcx boss.gcx